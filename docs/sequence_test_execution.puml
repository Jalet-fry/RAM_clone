@startuml sequence_test_execution
scale 1.5
skinparam {
    shadowing false
    linetype ortho
    defaultFontSize 10
    padding 1
}

skinparam participant {
    BackgroundColor #E3F2FD
    BorderColor #2196F3
}

skinparam actor {
    BackgroundColor #FFF9C4
    BorderColor #FBC02D
}

title Последовательность выполнения теста

actor User
participant "MainWindow" as UI
participant "TestController" as TC
participant "TesterWorker" as TW
participant "MemoryTester" as MT
participant "MemoryModel" as MM
participant "FaultInjector" as FI

User -> UI: Запустить тест
activate UI
UI -> TC: startTest()
activate TC
TC -> TW: run(algo)
activate TW
TC -> UI: testStarted()
deactivate TC

TW -> MT: runTest(algo)
activate MT

loop Для каждого адреса
    MT -> MM: writeDirect(addr, pattern)
    MT -> TW: progress(percent)
    TW -> UI: progress(percent)
    MT -> MM: read(addr)
    activate MM
    MM -> FI: applyFault(addr, value)
    activate FI
    FI --> MM: modified_value
    deactivate FI
    MM --> MT: value
    deactivate MM
    MT -> MT: readAndVerify()
end

MT -> TW: finished(results)
deactivate MT
TW -> TC: finished(results)
deactivate TW
activate TC
TC -> UI: onTestFinished(results)
deactivate TC
deactivate UI

@enduml
